--- Boxedwine.orig/project/linux/makefile	2023-01-10 04:01:17
+++ Boxedwine/project/linux/makefile	2023-01-15 03:17:44
@@ -4,8 +4,8 @@
 
 default all: multiThreaded
 
-uname_m := $(shell uname -m)
-uname_n := $(shell uname -n)
+uname_m ?= $(shell uname -m)
+uname_n ?= $(shell uname -n)
 $(info uname -m is $(uname_m))
 ifeq ($(uname_m), armv7l)
 JIT_FLAGS := -DBOXEDWINE_DYNAMIC_ARMV7 -DBOXEDWINE_DYNAMIC
@@ -47,7 +47,7 @@
 $(info MAKEFLAGS is $(MAKEFLAGS))
 endif
 jit release test testJit multiThreaded testMultiThreaded:
-	sh buildPocoLib.sh
+	sh buildPocoLib.sh $(BUILD_POCOLIB_ARGS)
 	@$(MAKE)
 
 clean:
@@ -106,11 +106,11 @@
 INCLUDES += -I../../lib/glew/include
 INCLUDES += -I../../lib/imgui
 
-SDL_CFLAGS = $(shell sdl2-config --cflags)
-SDL_LIBS = $(shell sdl2-config --libs)
-CPPFLAGS ?= -std=c++17 -O2 -Wall -Wno-invalid-offsetof -Wno-delete-incomplete -Wno-unused-result -Wno-unknown-pragmas -Wno-unused-local-typedefs -Wno-unused-variable -Wno-unused-function -Wno-unused-but-set-variable $(INCLUDES) -DBOXEDWINE_RECORDER -DBOXEDWINE_ZLIB -DBOXEDWINE_HAS_SETJMP -DSDL2=1 "-DGLH=<SDL_opengl.h>" -DBOXEDWINE_OPENGL_SDL -DSIMDE_SSE2_NO_NATIVE -DPOCO_UTIL_NO_JSONCONFIGURATION -DPOCO_UTIL_NO_XMLCONFIGURATION -DBOXEDWINE_POSIX -DBOXEDWINE_OPENGL_IMGUI_V2 $(SDL_CFLAGS) $(EXTRA_CPP_FLAGS)
+SDL_CFLAGS = $(shell @TERMUX_PREFIX@/bin/sdl2-config --cflags)
+SDL_LIBS = $(shell @TERMUX_PREFIX@/bin/sdl2-config --libs)
+CPPFLAGS_ORIG ?= -std=c++17 -O2 -Wall -Wno-invalid-offsetof -Wno-delete-incomplete -Wno-unused-result -Wno-unknown-pragmas -Wno-unused-local-typedefs -Wno-unused-variable -Wno-unused-function -Wno-unused-but-set-variable $(INCLUDES) -DBOXEDWINE_RECORDER -DBOXEDWINE_ZLIB -DBOXEDWINE_HAS_SETJMP -DSDL2=1 "-DGLH=<SDL_opengl.h>" -DBOXEDWINE_OPENGL_SDL -DSIMDE_SSE2_NO_NATIVE -DPOCO_UTIL_NO_JSONCONFIGURATION -DPOCO_UTIL_NO_XMLCONFIGURATION -DBOXEDWINE_POSIX -DBOXEDWINE_OPENGL_IMGUI_V2 $(SDL_CFLAGS) $(EXTRA_CPP_FLAGS)
 
-LDFLAGS = -L./linux_build/lib -lPocoNetSSL -lPocoNet -lPocoCrypto -lPocoUtil -lPocoFoundation -lssl -lcrypto -lpthread -lm -lz -lminizip -lGL -lstdc++ -lstdc++fs $(SDL_LIBS)
+LDFLAGS += -L./linux_build/lib -lPocoNetSSL -lPocoNet -lPocoCrypto -lPocoUtil -lPocoFoundation -lssl -lcrypto -lm -lz -lminizip -lGL -lstdc++ -lboost_filesystem $(SDL_LIBS) -lpulse -lXrandr -lXcursor -lXss -lXfixes -lXext -lXi -lX11
 
 #$(TEST_BUILD_DIR)/boxedwineTest: $(TEST_OBJS)
 #	$(CC) $(TEST_OBJS) -o $@ $(LDFLAGS)
@@ -126,12 +126,12 @@
 # c source
 $(BUILD_DIR)/%.c.o: %.c
 	$(MKDIR_P) $(dir $@)
-	$(CC) $(CPPFLAGS) $(CFLAGS) -c $< -o $@
+	$(CC) $(CPPFLAGS) $(CPPFLAGS_ORIG) $(CFLAGS) -c $< -o $@
 
 # c++ source
 $(BUILD_DIR)/%.cpp.o: %.cpp
 	$(MKDIR_P) $(dir $@)
-	$(CXX) $(CPPFLAGS) $(CXXFLAGS) -MMD -MP -c $< -o $@
+	$(CXX) $(CPPFLAGS) $(CPPFLAGS_ORIG) $(CXXFLAGS) -MMD -MP -c $< -o $@
 
 .PHONY: clean
 
